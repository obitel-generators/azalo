<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <title>Документация по Azalo.net</title>
      <link href="main.css" media="screen" rel="stylesheet" type="text/css" />
  </head>
  <body>

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-16604346-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>

    <div class="content">

      <a href="index.html" class="index">Содержание</a>

      <h1>Azalo.net</h1>

      <h2>Компоненты и данные</h2>

      <p>
        Большинство веб-сайтов в интерненте не похожи один на другой, однако в каждом
        из них есть некие общие детали. Мало какой сайт не содержит новостей, на многих
        сайтах есть форма обратной связи, каталог товаров или услуг. Список подобных
        типовых частей можно продолжать долго.
      </p>

      <p>
        Одним из ключевых объектов azalo является <strong>компонент</strong>, который,
        как раз, и представляет из себя типовой фрагмент сайта, на подобие озвученных
        выше новостей, кталогов и т.д.
      </p>

      <h3>Структура компонента</h3>

      <p>
        Компонент представляет собой структуру образованную из старниц сайта и
        объедененную связями. Как правило компонент содержит две головных страницы -
        одна представляет корень публичной части, вторая - админской части сайта.
        На изображении ниже эти две страницы называются одинаково "Новости", но
        одна (публичная) имеет белый фон, другая (админская) страница имеет розовый фон.
      </p>
      <p>
        <img src="images/component-news.png" alt="Компонент новостей в Azalo.net." />
      </p>

      <p>
        Рассмотрим подробнее каждую страницу.
      </p>
      
      <ol>
        <li>
          Страница публичной части сайта, на которой есть список последних новостей.
          Эта страница не есть блок из нескольких новостей, который проходят через весь
          (или почти весь) сайт. Это отдельная страница, центральную роль в
          которой занимает список из последних новостей. Каждый элемент списка ведет
          на полный текст новости. На странице также присутвует ссылка ведущая в
          архив новостей.
        </li>
        <li>
          Старница с текстом одной новости. Тут отображается вся новость и соответсвенно
          есть возврат к списку новостей.
        </li>
        <li>
          Архив новостей. Эта страница содержит список годов, за которые были новости,
          и список месяцев для каждого года. Месяц является ссылкой и ведет на список новостей
          за данный месяц. Выглядит страница примерно так:
          <p>
            <img src="images/news-archive.png" alt="Компонент новостей в Azalo.net." />
          </p>
        </li>
        <li>
          Страница "Список новостей", полностью повторяет внешний вид и функционал страницы №1 "Новости".
          Этот особенность отмечается перетягиванием доминошки со страницы "Список новостей" (№3) на
          "Новости" (№1) в двух режимах отображения "Дизайн" и "Данные"
          <p>
            <img src="images/component-news-modes.png" alt="Компонент новостей в Azalo.net." />
          </p>

          В результате этих двух перетягиваний страница "Список новостей" приобретет серый фон, который
          говорит о том, что страница является полным дубликатом другой страницы.
          Проведенные манипуляции с дубликатами позволили сократить схему. В противном случае схема
          имела бы такой вид:
          <p>
            <img src="images/component-news-expanded.png" alt="Компонент новостей в Azalo.net." />
          </p>
          
        </li>

        <li>
          <p>
            Эта страница принадлежит админской стороне сайта, что подразумевает недоступность для
            обычного пользователя.
          </p>

          <p>
            Страница содержит список новостей с соответвующимы ссылками на отельную новость.
          </p>
        </li>

        <li>
          Тут мы можем создать либо отредактировать новость.
        </li>

        <li>
          На этой странице просмоетреть без возможности редактирования.
        </li>
      </ol>


      <h3>Данные</h3>

      <p>
        В большинстве случаев данные используемые на сайте отражают некую сущность,
        в примере с компонентом новостей такой сущностью является "новость". И этой
        новости соответсвует некий набор данных, который, наиболее вероятно, будет 
        проецироваться на базу данных. Т.е. в базе будет некая таблица "news", в
        которой и будут хранится новости.
      </p>
      
      <p>
        Что бы описать данные, в данном случае новость необходимо переключится в
        режим просмотра "Данные"
      </p>

      <p>
        Справа сверху будет ссылка нажав на которую можно перейти к созданию нового
        типа данных:
      </p>
      
      <p>
        <img src="images/right-data-box-1.png" alt="Компонент новостей в Azalo.net." />
      </p>

      После ввода имени для структуры данных:

      <p>
        <img src="images/new-struct.png" alt="Компонент новостей в Azalo.net." />
      </p>

      <p>
        мы окажемся на странице редактирования данных. Тут можно указать необходимые
        данные и их типы.
      </p>

      <p>
        <img src="images/create-struct.png" alt="Компонент новостей в Azalo.net." />
      </p>

      <p>
        После создания структуры можно вернутся к компоненту. Теперь правая верхняя
        часть должна принять следующий вид:
      </p>

      <p>
        <img src="images/right-data-box-2.png" alt="Компонент новостей в Azalo.net." />
      </p>

      <p>
        Теперь у нас есть данные, которые могут быть связанны со страницами.
        Якорь возле данных "Новость"  можно потянуть и бросить на нужные страницы.
        В данном случае нужными страницами являются страницы на которых выполняются
        какие-либо операции с <strong>одной</strong> новостью.
        Такими страницами являются: "Новость" (стр. №2), "Редактирование/создание новости" (стр. №6) и
        "Отображение новости" (стр. №7)
      </p>

      <p>
        После бросания якоря на эти страницы компонент приймет следующий вид:
      </p>

      <p>
        <img src="images/component-news-1.png" alt="Компонент новостей в Azalo.net." />
      </p>

      <p>
        На страницах, для которых были указанны данные появились соотвеетвующие записи.
        Теперь, щелкнув на названии данных, в данном случае "Новость", можно указать
        те операции, которые будут выполняться на этой странице над указанными данными.
      </p>

      <p>
        <img src="images/component-news-2.png" alt="Компонент новостей в Azalo.net." />
      </p>
      <p>
        Теперь необходимо указать данные связанные со страницами "Новости" (№1 и №5).
        На этих страницах отображается не новость, а список (коллекция) новостей.
        Для того чтоб связтаь страницы и данные необходимо создать соответсвующую коллекцию.
        Для этого служит это кнопочка рядом со структурой данных "Новость" в
        правой-верхней части страницы:
      </p>

      <p>
        <img src="images/new-collection.png" alt="Компонент новостей в Azalo.net." />
      </p>

      <p>
        После создания коллекции, её добавления на старницу и указания операция, компонент
        приймет вид как показано на этой картинке:
      </p>

      <p>
        <img src="images/component-news-3.png" alt="Компонент новостей в Azalo.net." />
      </p>

      <p>
        К текущему моменту осталась толко одна страница не связанная с данными.
        Это архив новостей. Т.к. данные отображаемые на странице напрямую не
        отображаются на базу данных, то и нет смысла связывать страницу с данными.
        Однако хотелось бы детализировать информацию о странице. И для этого есть
        режим отображения "Описание и заголовки"
      </p>

        <h4>Описание сложных структур данных</h4>
        <p>
          Бывают ситуации, когда некие данные не могут быть описаны одной записю в таблице.
          Например рассмотрим товар, который описывается следующим набором данных:
        </p>
        <ul>
          <li>Название товара</li>
          <li>Описание</li>
          <li>Цена</li>
          <li>Набор фотографий, где каждая запись это:
            <ul>
              <li>Фотография</li>
              <li>Описание фотографии</li>
            </ul>
          </li>
        </ul>
        <p>
          Т.е. в данном случае мы имеем две сущности связанные отношинем один-ко-многим:
          один товар и с ним связано много фотографий.
        </p>

        <p>
          Для описания этого необходимо выполнить следующие действия:
        </p>
        <ol>
          <li>Создать структуру описывающую фотографии</li>
          <li>Создать список фотографии</li>
          <li>Создать структуру товар, и в качестве одного из полей указать "Фотографии" с типом "Список фотографий"</li>
        </ol>
        <p>
          <img src="images/complex_struct.png" alt="Сложные типы данных в Azalo.net." />
        </p>

      <h3>Описание и заголовки</h3>

      <p>
        В режиме отображения "Описание и заголовки" можно указать заголовки (те заголовки,
        которые сверху браузера на синем фоне, те, что &lt;title&gt;Заголовок&lt;/title&gt;) для
        каждой страницы.
      </p>
      
      <p>
        Также для каждой страницы можно задать произвольное текстовое описание страницы.
        При описании можно использовать wiki-синтаксис. Подсказка по синтаксису доступна по ссылке
        "Помощь по синтаксису"
      </p>

      <p>
        <img src="images/component-news-4.png" alt="Компонент новостей в Azalo.net." />
      </p>


      <div class="notabena">
        Иногда необходимо организовать кольцевую структуру или структуру с
        неопределенным количеством уровней. На пример каталог товаров в котором может
        быть произвольное количество подкатегорий. В этом случае можно поступить следующим образом:
        <p>
          <img src="images/sub-category.png" alt="Компонент новостей в Azalo.net." />
        </p>
        Создается страница категории, которая ведет на страницу товара и на страницу подкатегории,
        и для страницы подкатегории указывается, что она является полным дубликатом страницы категория.
      </div>

      <p class="notabena">
        Для корневых публичных страниц компонента заголовки не задаются.
      </p>

      <h3>Подключение компонента к проекту</h3>

      <p>
        В этом разделе мы расмотрим что происходит, когда компонент добавляется к проекту.
      </p>

      <p>
        На изображении ниже предствалены проект, состоящий из двух страниц и компонент
        состоящий из 5 страниц до стыковки и после. Верхняя часть изображения до, нижняя - после.
      </p>
      <p>
        <img src="images/project_component.png" alt="Компоненты и проекты" />
      </p>
      <p>
        Тёмно-зеленая стрелка символизирует перетягивание якоря компонента на старницу "Главная".
        После этого проект принимает вид как показано на нижней части изображения.
      </p>

      <div class="notabena">
        <p>
          Главная публичная страница компонента будет <strong>встроена в страницу "Главная"</strong> и
          отдельно отображаться не будет. Соотвественно страницы "B" и "C", будут пристыкованы
          непосредственно к странице "Главная". "Движение" страниц "A", "B", "C" отображено лазуревыми стрелками.
          
        </p>
        <p>
          Страницы админки автоматически подстыковываются к первой админской странице проекта.
          В данном случае проект имеет всего одну страницу админки - "Вход в админку", поэтому
          страницы компонента "1" и "2" посдтыкованы к ней. "Движение" этих страниц при стыковке
          отображено ярко-зелеными стрелочками.
        </p>
        <p>
          Если из проетка удалить страницу "Вход в админку", страницы "1" и "2" также не будут отображаться, и
          вновь появятся после создания у проекта первый страницы админки.
        </p>
      </div>

      <p>
        Связи страниц внутри проекта показаны оранжевыми линиями (см. оранжевую стрелку),
        свзи страниц внутри компонента отображаются голубыми линиями (см. голобую стрелку).
      </p>

      
        <p>
          В режиме отображения "Компоненты" в правой-верхней части страницы отображается
          табличка из двух колонок, в которой находится список компонентов. Правый столбец
          соответствует списку в пункте меню "Компоненты". Левый столбец - содержит список
          компонентов используемых в проектке
        </p>
        <p>
          <img src="images/components_list.png" alt="Компоненты и проекты" />
        </p>
      <div class="notabena">
        <p>
          <strong>Компоненты в левом и правом списке являются разными компонентами!</strong>
          При добавлении компонента к проекту происходит не добавление ссылки на
          один из существующих компонентов, а <strong>копирование</strong> компонента.
          Т.о. компоненты на картинке отмеченные зеленой и лазурной стрелками являются
          разными компонентами.
        </p>
        <p>
          Если необходимо изменить компонент, который уже присоединен к проекту
          следует использовать ссылку помеченную зеленой стрелкой. Изменения
          компоненты не отразятся на компоненте помеченной лазурной стрелкой.
        </p>
      </div>
      <p>
        Надпись в скобках справа от названия присоединенного компонента соответствует
        названию страницы, к которой присоединен компонент.
        Крестик еще правее может быть использован для удаления компонента из проекта.
      </p>

      <a href="index.html" class="index">Содержание</a>

    </div>
  </body>
</html>
